{% extends "base.html" %}
{% load static %}


{% block content %}
    <!-- BTC Buy Dashboard -->
    <section id="btc_buy" align="center">
        <div align="center">
            <h1>{{user.username}}</h1>
            Bitcoin Price: ${{btcprice}} <br>
            Bitcoin Balance: {{btcdetails.balance_btc}}BTC <br>
            USD Balance: ${{fiatdetails.balance}} <br>
        </div>

        <div id="bootstrap-override" class="form-section" align="center">
            <form id="btc-buy-Form" class="default-form align-items-center" method="POST">
                {% csrf_token %}

                <div class="mb-3">
                  <label for="USD-amount" class="form-label">USD amount</label>
                  <input class="form-control" id="usdamount" name="usdamount">
                </div>
                <h2 id="btcamount"></h2>
                <button id="bootstrap-override" type="submit" value="submit" class="btn btn-primary">Buy</button>

            </form>

            <!-- Display message when user clicks buy -->
            {% for message in messages %}
            <h5 style="color: red;">{{ message }}</h5>
          {% endfor %}

        </div>
    </section>

    
    <!-- <script>
        var useramount = document.getElementById('usdamount');
        useramount.addEventListener('change', btcamount);

        function btcamount() {
            var amount = 0;
            amount = document.getElementById('usdamount').value;
            btcamount = amount / "{{btcprice}}";
            document.getElementById("btcamount").innerHTML = "You Get: " + btcamount + "BTC"; 
        }
    </script> -->

{% endblock %}

{% block scripts %}
    <!-- save price variable so you can access it inside the script -->
    <script>var btcprice = "{{btcprice}}" </script>
    <script src="{% static 'js/youget.js'%}"></script>
{% endblock %}